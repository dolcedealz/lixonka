<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ú–∏–Ω–∏-–∫–∞–∑–∏–Ω–æ Greenlight</title>
  <style>
    .hidden { display: none; }
    .game-mode { font-size: 24px; margin-top: 20px; }
    button { padding: 10px; margin: 5px; }
    input { padding: 10px; margin: 5px; }
    .user-info { font-size: 18px; margin-top: 20px; }
    .slot { display: inline-block; width: 50px; height: 50px; font-size: 30px; line-height: 50px; border: 2px solid #333; margin: 5px; }
    .admin-panel { margin-top: 30px; border-top: 2px solid #333; padding-top: 20px; }
    .admin-panel input { width: 100px; }
    .admin-panel .player-list { margin-top: 20px; }
  </style>
</head>
<body>

<h1>üé∞ –ú–∏–Ω–∏-–∫–∞–∑–∏–Ω–æ Greenlight</h1>

<div id="gameArea">
  <div class="user-info">
    <p>–ü—Ä–∏–≤–µ—Ç, <span id="username"></span></p>
    <p>–ë–∞–ª–∞–Ω—Å: <span id="balance">1000</span> üí∞</p>
  </div>

  <div id="rouletteUI" class="game-mode">
    <h2>–†—É–ª–µ—Ç–∫–∞</h2>
    <input type="number" id="rouletteBet" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç–∞–≤–∫—É" />
    <button id="spinRoulette">–ö—Ä—É—Ç–∏—Ç—å —Ä—É–ª–µ—Ç–∫—É!</button>
    <div id="rouletteResult"></div>
  </div>

  <div id="slotsUI" class="game-mode">
    <h2>–°–ª–æ—Ç—ã</h2>
    <div>
      <div class="slot" id="slot1">üçí</div>
      <div class="slot" id="slot2">üçã</div>
      <div class="slot" id="slot3">üîî</div>
    </div>
    <input type="number" id="slotsBet" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç–∞–≤–∫—É" />
    <button id="spinSlots">–ö—Ä—É—Ç–∏—Ç—å —Å–ª–æ—Ç—ã!</button>
    <div id="slotsResult"></div>
  </div>

  <div id="guessUI" class="game-mode">
    <h2>–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ</h2>
    <input type="number" id="guessInput" min="1" max="5" placeholder="–ß–∏—Å–ª–æ 1‚Äì5" />
    <button id="guessButton">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <div id="guessResult"></div>
  </div>
</div>

<!-- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
<div class="admin-panel hidden" id="adminPanel">
  <h2>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</h2>
  <div>
    <h3>–°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤:</h3>
    <div id="playerList" class="player-list"></div>
  </div>
</div>

<script>
  const gameArea = document.getElementById('gameArea');
  const usernameSpan = document.getElementById('username');
  const balanceSpan = document.getElementById('balance');
  const rouletteBetInput = document.getElementById('rouletteBet');
  const slotsBetInput = document.getElementById('slotsBet');
  const guessInput = document.getElementById('guessInput');
  const adminPanel = document.getElementById('adminPanel');
  const playerList = document.getElementById('playerList');

  // –ü–æ–ª—É—á–∞–µ–º –∏–ª–∏ —Å–æ–∑–¥–∞—ë–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  let users = JSON.parse(localStorage.getItem('users')) || [];
  let currentUser = JSON.parse(localStorage.getItem('currentUser'));

  // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ –≤–æ—à–µ–ª, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ
  if (!currentUser) {
    currentUser = {
      id: 'user-' + Math.random().toString(36).substr(2, 9),
      username: '–ò–≥—Ä–æ–∫ ' + Math.floor(Math.random() * 1000),
      balance: 1000,
      winChance: 0.5, // –®–∞–Ω—Å –ø–æ–±–µ–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    };
    localStorage.setItem('currentUser', JSON.stringify(currentUser));
    users.push(currentUser);
    localStorage.setItem('users', JSON.stringify(users));
  }

  usernameSpan.innerText = currentUser.username;
  balanceSpan.innerText = currentUser.balance;

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  function updateUserBalance(amount) {
    currentUser.balance += amount;
    localStorage.setItem('currentUser', JSON.stringify(currentUser));
    balanceSpan.innerText = currentUser.balance;
  }

  // –†—É–ª–µ—Ç–∫–∞
  document.getElementById('spinRoulette').addEventListener('click', () => {
    const betAmount = parseInt(rouletteBetInput.value);
    if (isNaN(betAmount) || betAmount <= 0 || betAmount > currentUser.balance) {
      alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç–∞–≤–∫—É!');
      return;
    }

    // –®–∞–Ω—Å –≤—ã–∏–≥—Ä—ã—à–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    const winChance = currentUser.winChance;
    const win = Math.random() < winChance;

    if (win) {
      const winnings = betAmount * 2;
      updateUserBalance(winnings);
      document.getElementById('rouletteResult').innerText = `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${winnings} üí∞!`;
    } else {
      updateUserBalance(-betAmount);
      document.getElementById('rouletteResult').innerText = `–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ ${betAmount} üí∞.`;
    }
  });

  // –°–ª–æ—Ç—ã
  document.getElementById('spinSlots').addEventListener('click', () => {
    const betAmount = parseInt(slotsBetInput.value);
    if (isNaN(betAmount) || betAmount <= 0 || betAmount > currentUser.balance) {
      alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç–∞–≤–∫—É!');
      return;
    }

    // –°–ª–æ—Ç—ã
    const symbols = ['üçí', 'üçã', 'üîî', 'üíé'];
    const r1 = symbols[Math.floor(Math.random() * symbols.length)];
    const r2 = symbols[Math.floor(Math.random() * symbols.length)];
    const r3 = symbols[Math.floor(Math.random() * symbols.length)];
    document.getElementById('slot1').innerText = r1;
    document.getElementById('slot2').innerText = r2;
    document.getElementById('slot3').innerText = r3;

    // –õ–æ–≥–∏–∫–∞ –≤—ã–∏–≥—Ä—ã—à–∞
    const win = r1 === r2 && r2 === r3;
    if (win) {
      const multiplier = 5;
      updateUserBalance(betAmount * multiplier);
      document.getElementById('slotsResult').innerText = `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏! –í–∞—à –º–Ω–æ–∂–∏—Ç–µ–ª—å: x${multiplier}`;
    } else {
      updateUserBalance(-betAmount);
      document.getElementById('slotsResult').innerText = `–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞!`;
    }
  });

  // –£–≥–∞–¥–∞–π —á–∏—Å–ª–æ
  document.getElementById('guessButton').addEventListener('click', () => {
    const guess = parseInt(guessInput.value);
    const actual = Math.floor(Math.random() * 5) + 1;

    if (guess === actual) {
      const winnings = 50;
      updateUserBalance(winnings);
      document.getElementById('guessResult').innerText = `üéâ –í–µ—Ä–Ω–æ! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${winnings} üí∞.`;
    } else {
      updateUserBalance(-10);
      document.getElementById('guessResult').innerText = `–ù–µ—Ç, –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —á–∏—Å–ª–æ: ${actual}. –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ 10 üí∞.`;
    }
  });

  // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
  function renderAdminPanel() {
    adminPanel.classList.remove('hidden');
    playerList.innerHTML = '';
    users.forEach((user, index) => {
      const playerDiv = document.createElement('div');
      playerDiv.innerHTML = `
        <p><strong>${user.username}</strong> - –ë–∞–ª–∞–Ω—Å: ${user.balance} üí∞ - –®–∞–Ω—Å –ø–æ–±–µ–¥—ã: 
        <input type="number" min="0" max="1" step="0.01" value="${user.winChance}" data-user-id="${user.id}" /> 
        <button onclick="deleteUser(${index})">–£–¥–∞–ª–∏—Ç—å</button></p>
      `;
      playerList.appendChild(playerDiv);
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —à–∞–Ω—Å–∞ –ø–æ–±–µ–¥—ã
    document.querySelectorAll('.admin-panel input').forEach(input => {
      input.addEventListener('change', (event) => {
        const userId = event.target.getAttribute('data-user-id');
        const newWinChance = parseFloat(event.target.value);
        updateWinChance(userId, newWinChance);
      });
    });
  }

  function updateWinChance(userId, newWinChance) {
    users.forEach(user => {
      if (user.id === userId) {
        user.winChance = newWinChance;
        localStorage.setItem('users', JSON.stringify(users));
      }
    });
  }

  // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  function deleteUser(index) {
    users.splice(index, 1);
    localStorage.setItem('users', JSON.stringify(users));
    renderAdminPanel();
  }

  // –í–∫–ª—é—á–∞–µ–º –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–ª–∞–≤–∏—à–∏
  window.addEventListener('keydown', (event) => {
    if (event.key === 'a') {
      renderAdminPanel();
    }
  });

</script>

</body>
</html>













